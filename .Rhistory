library(tidyverse)
library(ggplot2)
library(readr)
library(haven)
library(purrr)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
setwd("~/GitLab/Ramsey Onboarding")
library(tidyverse)
library(ggplot2)
library(readr)
library(haven)
library(purrr)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
View(data)
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
#data <- t(data[,-1])[,c(1:39)]
data <- t(data[,-1])[,c(1:39)]
colnames(data) <- n
rownames(data) <- NULL
data <- data[["b","pvalue", "ll", "ul", "x"]]
male_diabetes <- as_tibble(data[,c(1:4)])
female_diabetes <- as_tibble(data[,c(5:8)])
male_heartatk <- as_tibble(data[,c(9:12)])
female_heartatk <- as_tibble(data[,c(13:16)])
View(female_diabetes)
data <- pivot_wider(data[,-1])[,c(1:39))
data <- pivot_wider(data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)])
data <- data[,"b","pvalue", "ll", "ul", "x"]
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
data <- bind_rows(male_diabetes, female_diabetes, male_heartatk, female_heartatk)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
#data <- pivot_wider()
colnames(data) <- n
rownames(data) <- NULL
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
#data <- data[,"b","pvalue", "ll", "ul", "x"]
male_diabetes <- as_tibble(data[,c(1:4)])
female_diabetes <- as_tibble(data[,c(5:8)])
male_heartatk <- as_tibble(data[,c(9:12)])
female_heartatk <- as_tibble(data[,c(13:16)])
data <- rbind(male_diabetes, female_diabetes, male_heartatk, female_heartatk)
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
#data <- pivot_wider()
colnames(data) <- n
rownames(data) <- NULL
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
#data <- data[,"b","pvalue", "ll", "ul", "x"]
male_diabetes <- as_tibble(data[,c(1:4)])
female_diabetes <- as_tibble(data[,c(5:8)])
male_heartatk <- as_tibble(data[,c(9:12)])
female_heartatk <- as_tibble(data[,c(13:16)])
data <- bind_rows(male_diabetes, female_diabetes, male_heartatk, female_heartatk)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
#data <- pivot_wider()
colnames(data) <- n
rownames(data) <- NULL
data <- data[,"b","pvalue", "ll", "ul", "x"]
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
#data <- pivot_wider()
colnames(data) <- n
rownames(data) <- NULL
data <- data[,"b","pvalue", "ll", "ul"]
data <- select(data, b, pvalue, ll, ul)
data %>% select(b, pvalue, ll, ul)
data %>%
mutate(race) %>%
mutate(type) %>%
mutate(sex)
data <- as_tibble(data)
data %>% select(b, pvalue, ll, ul)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data
data %>% select(b, pvalue, ll, ul)
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
colnames(data) <- n
rownames(data) <- NULL
data %>% select(b, pvalue, ll, ul)
data <- as_tibble(data)
data %>% select(b, pvalue, ll, ul)
data <- select(b, pvalue, ll, ul)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
#data <- pivot_wider()
colnames(data) <- n
rownames(data) <- NULL
data <- as_tibble(data)
data <- select(b, pvalue, ll, ul)
data <- select(data, b, pvalue, ll, ul)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
#data <- pivot_wider()
colnames(data) <- n
rownames(data) <- NULL
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
male_diabetes <- as_tibble(data[,c(1:4)])
female_diabetes <- as_tibble(data[,c(5:8)])
male_heartatk <- as_tibble(data[,c(9:12)])
female_heartatk <- as_tibble(data[,c(13:16)])
data <- bind_rows(male_diabetes, female_diabetes, male_heartatk, female_heartatk)
data %>%
mutate(race) %>%
mutate(type) %>%
mutate(sex)
data %>%
mutate(data, race) %>%
mutate(data, type) %>%
mutate(data, sex)
data <- data %>%
mutate(data, race) %>%
mutate(data, type) %>%
mutate(data, sex)
data <- data %>%
mutate(data, race=) %>%
mutate(data, type=) %>%
mutate(data, sex=)
data <- data %>%
mutate(data, race="") %>%
mutate(data, type="") %>%
mutate(data, sex="")
data <- data %>%
mutate(data, race="White""Black""Other") %>%
mutate(data, type="") %>%
mutate(data, sex="")
data <- data %>%
mutate(data, race=rep("White",4)) %>%
mutate(data, type="") %>%
mutate(data, sex="")
data <- data %>%
mutate(data, race=rep("White",12)) %>%
mutate(data, type="") %>%
mutate(data, sex="")
data <- data %>%
mutate(data, race=rep(c("White","Black","Other"),4)) %>%
mutate(data, type="") %>%
mutate(data, sex="")
View(data)
data <- data %>%
pivot_longer(cols=c(-A),names_to="Original_Vars") %>%
pivot_wider(names_from=c(A))
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- data %>%
pivot_longer(cols=c(-NULL),names_to="Original_Vars") %>%
pivot_wider(names_from=c(NULL))
data <- data %>%
pivot_longer(cols=c(-""),names_to="Original_Vars") %>%
pivot_wider(names_from=c(""))
data <- data %>%
mutate(data, ""=name)
colnames(data) <- c("COL1");
colnames(data) <- c("val","White","Black","Other");
data <- data %>%
pivot_longer(cols=c(-val),names_to="Original_Vars") %>%
pivot_wider(names_from=c(val))
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
#data <- t(data[,-1])[,c(1:39)]
data <- data %>%
pivot_longer(cols=c(-val),names_to="Original_Vars") %>%
pivot_wider(names_from=c(val), values_from = value)
colnames(data) <- n
rownames(data) <- NULL
data <- select(data, b, pvalue, ll, ul)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
#data <- t(data[,-1])[,c(1:39)]
data <- data %>%
pivot_longer(cols=c(-val),names_to="Original_Vars") %>%
pivot_wider(names_from=c(val))
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
#data <- t(data[,-1])[,c(1:39)]
data <- data %>%
pivot_longer(cols=c(-val),names_to="Original_Vars")
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
data
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
#data <- t(data[,-1])[,c(1:39)]
data[,c(2,3,4)] <- map(data[,c(2,3,4)], as.numeric)
data <- mutate_at(vars(White, Black, Other), factor)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
View(data)
colnames(data) <- c("val","White","Black","Other");
data
data <- mutate_at(vars(White, Black, Other), factor)
data <- mutate_at(data, vars(White, Black, Other), factor)
data
data <- data %>%
pivot_longer(cols=c(-val),names_to="Original_Vars") %>%
pivot_wider(names_from=c(val))
data <- data %>%
pivot_longer(cols=c(-val),names_to="Race") %>%
pivot_wider(names_from=c(val))
data <- select(data, b, pvalue, ll, ul)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
#data <- t(data[,-1])[,c(1:39)]
data <- mutate_at(data, vars(White, Black, Other), factor)
data <- data %>%
pivot_longer(cols=c(-val),names_to="Race") %>%
pivot_wider(names_from=c(val))
data <- select(data, "b", pvalue, ll, ul)
data <- select(data, 'b', pvalue, ll, ul)
data
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
#data <- t(data[,-1])[,c(1:39)]
data <- data %>%
pivot_longer(cols=c(-val),names_to="Race") %>%
pivot_wider(names_from=c(val))
data <- select(data, b, pvalue, ll, ul)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
colnames(data) <- n
rownames(data) <- NULL
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
male_diabetes <- as_tibble(data[,c(1:4)])
female_diabetes <- as_tibble(data[,c(5:8)])
male_heartatk <- as_tibble(data[,c(9:12)])
female_heartatk <- as_tibble(data[,c(13:16)])
data <- bind_rows(male_diabetes, female_diabetes, male_heartatk, female_heartatk)
data <- data %>%
mutate(data, race="") %>%
mutate(data, type="") %>%
mutate(data, sex="")
data[,c(1,2,3,4)] <- map(data[,c(1,2,3,4)], as.numeric)
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
colnames(data) <- n
rownames(data) <- NULL
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
male_diabetes <- as_tibble(data[,c(1:4)])
female_diabetes <- as_tibble(data[,c(5:8)])
male_heartatk <- as_tibble(data[,c(9:12)])
female_heartatk <- as_tibble(data[,c(13:16)])
data <- bind_rows(male_diabetes, female_diabetes, male_heartatk, female_heartatk)
data <- data %>%
mutate(data, race="") %>%
mutate(data, type="") %>%
mutate(data, sex="")
data_diabetes <- data[1:6,]
data_heartatk <- data[7:12,]
data <- mutate_at(vars(b, pvalue, ll, ul), factor)
data <- mutate_at(data, vars(b, pvalue, ll, ul), factor)
data
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- map(data, function(x) str_replace_all(x,'[\"]', ''))
data <- read_csv("Table1_margins.csv")
data <- data %>%
map(data, function(x) str_replace_all(x, "=", "")) %>%
map(data, function(x) str_replace_all(x,'[\"]', ''))
data <-
map(data, function(x) str_replace_all(x, "=", "")) %>%
map(data, function(x) str_replace_all(x,'[\"]', ''))
data <- read_csv("Table1_margins.csv")
data <- map(data, function(x) str_replace_all(x, "=", ""))
data <- map(data, function(x) str_replace_all(x,'[\"]', ''))
data <- as_tibble(data)
colnames(data) <- c("val","White","Black","Other");
n <-c('b','se','t','pvalue','ll','ul','df','crit','eform',rep(c('x','b','se','t','pvalue','ll','ul','df','crit','eform'),3))
data <- t(data[,-1])[,c(1:39)]
colnames(data) <- n
rownames(data) <- NULL
data <- data[,c(1,4,5,6,11,14,15,16,21,24,25,26,31,34,35,36)]
male_diabetes <- as_tibble(data[,c(1:4)])
female_diabetes <- as_tibble(data[,c(5:8)])
male_heartatk <- as_tibble(data[,c(9:12)])
female_heartatk <- as_tibble(data[,c(13:16)])
data <- bind_rows(male_diabetes, female_diabetes, male_heartatk, female_heartatk)
data <- data %>%
mutate(data, race="") %>%
mutate(data, type="") %>%
mutate(data, sex="")
data <- mutate_at(data, vars(b, pvalue, ll, ul), factor)
data_diabetes <- data[1:6,]
data_heartatk <- data[7:12,]
data <- read_csv("Table1_margins.csv") %>%
map(data, function(x) str_replace_all(x, "=", "")) %>%
map(data, function(x) str_replace_all(x,'[\"]', '')) %>%
as_tibble(data)
View(read_csv("Table1_margins.csv"))
View(read_excel("Table1_margins.csv"))
library(tidyverse)
library(ggplot2)
library(readr)
library(haven)
library(purrr)
View(read_excel("Table1_margins.csv"))
library(readxl)
View(read_excel("Table1_margins.csv"))
View(read_dta("diabetes_s1.dta"))
View(read_dta("diabetes_s1.dta"))
temp1 = list.files(path="",pattern="*.dta")
list2env(lapply(setNames(temp1, make.names(gsub("*.dta$","", temp1))), read_dta), envir = .GlobalEnv)
list.files(path="",pattern="*.dta")
list.files(pattern="*.dta")
list2env(lapply(setNames(temp1, make.names(gsub("*.dta$","", temp1))), read_dta), envir = .GlobalEnv)
rm(list=ls())
temp1 = list.files(pattern="*.dta")
list2env(lapply(setNames(temp1, make.names(gsub("*.dta$","", temp1))), read_dta), envir = .GlobalEnv)
rm(list=ls())
temp1 = list.files(pattern="*.dta")
list2env(lapply(setNames(temp1, make.names(gsub("*.dta$","", temp1))), read_dta), envir = .GlobalEnv)
View(heartatk_s1)
